---
title: "REST API"
description: "Detailed API documentation for developers looking to customize AdUnblock implementation"
---

# REST API Reference

The AdUnblock REST API allows you to programmatically manage your ad blocker detection, access analytics data, and customize user experiences.

## Authentication

All API requests require authentication using your API key. Include your API key in the request headers:

```bash
Authorization: Bearer YOUR_API_KEY
```

<Warning>
  Keep your API key secure and never expose it in client-side code. Use environment variables or secure configuration files.
</Warning>

## Base URL

```
https://api.ad-unblock.com/v1
```

## Rate Limiting

API requests are rate-limited to prevent abuse:

- **Free Plan**: 1,000 requests per hour
- **Starter Plan**: 10,000 requests per hour  
- **Pro Plan**: 100,000 requests per hour
- **Enterprise**: Custom limits

Rate limit headers are included in all responses:

```
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1640995200
```

## Detection API

### Record Detection Event

Record when an ad blocker is detected on your site.

<CodeGroup>
```bash cURL
curl -X POST https://api.ad-unblock.com/v1/detection \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com/page",
    "user_agent": "Mozilla/5.0...",
    "ad_blocker": "ublock-origin",
    "timestamp": "2024-01-15T10:30:00Z"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.ad-unblock.com/v1/detection', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    url: 'https://example.com/page',
    user_agent: navigator.userAgent,
    ad_blocker: 'ublock-origin',
    timestamp: new Date().toISOString()
  })
});
```

```python Python
import requests

response = requests.post(
    'https://api.ad-unblock.com/v1/detection',
    headers={
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json'
    },
    json={
        'url': 'https://example.com/page',
        'user_agent': 'Mozilla/5.0...',
        'ad_blocker': 'ublock-origin',
        'timestamp': '2024-01-15T10:30:00Z'
    }
)
```
</CodeGroup>

#### Request Body

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `url` | string | Yes | The page URL where detection occurred |
| `user_agent` | string | Yes | User's browser user agent string |
| `ad_blocker` | string | No | Detected ad blocker type |
| `timestamp` | string | Yes | ISO 8601 timestamp of detection |
| `user_id` | string | No | Anonymous user identifier |
| `session_id` | string | No | Session identifier |

#### Response

```json
{
  "success": true,
  "detection_id": "det_1234567890",
  "message": "Detection recorded successfully"
}
```

### Get Detection Status

Check the current detection status for a user session.

<CodeGroup>
```bash cURL
curl -X GET "https://api.ad-unblock.com/v1/detection/status?session_id=sess_123" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch(
  'https://api.ad-unblock.com/v1/detection/status?session_id=sess_123',
  {
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY'
    }
  }
);
```
</CodeGroup>

#### Query Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `session_id` | string | Yes | Session identifier |
| `user_id` | string | No | Anonymous user identifier |

#### Response

```json
{
  "session_id": "sess_123",
  "ad_blocker_detected": true,
  "ad_blocker_type": "ublock-origin",
  "whitelisted": false,
  "last_detection": "2024-01-15T10:30:00Z",
  "detection_count": 5
}
```

## Analytics API

### Get Site Analytics

Retrieve analytics data for your site.

<CodeGroup>
```bash cURL
curl -X GET "https://api.ad-unblock.com/v1/analytics?start_date=2024-01-01&end_date=2024-01-31" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch(
  'https://api.ad-unblock.com/v1/analytics?start_date=2024-01-01&end_date=2024-01-31',
  {
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY'
    }
  }
);
```
</CodeGroup>

#### Query Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `start_date` | string | Yes | Start date (YYYY-MM-DD) |
| `end_date` | string | Yes | End date (YYYY-MM-DD) |
| `granularity` | string | No | Data granularity: `day`, `week`, `month` |
| `page` | string | No | Filter by specific page |

#### Response

```json
{
  "period": {
    "start_date": "2024-01-01",
    "end_date": "2024-01-31"
  },
  "summary": {
    "total_page_views": 100000,
    "ad_blocker_detections": 25000,
    "detection_rate": 0.25,
    "whitelist_requests": 5000,
    "whitelist_rate": 0.20
  },
  "daily_data": [
    {
      "date": "2024-01-01",
      "page_views": 3200,
      "detections": 800,
      "detection_rate": 0.25,
      "whitelists": 160,
      "whitelist_rate": 0.20
    }
  ],
  "ad_blocker_breakdown": {
    "ublock-origin": 15000,
    "adblock-plus": 6000,
    "adguard": 3000,
    "ghostery": 1000
  }
}
```

### Get Real-Time Stats

Get real-time detection statistics.

<CodeGroup>
```bash cURL
curl -X GET https://api.ad-unblock.com/v1/analytics/realtime \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch('https://api.ad-unblock.com/v1/analytics/realtime', {
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY'
  }
});
```
</CodeGroup>

#### Response

```json
{
  "current_visitors": 1250,
  "ad_blocker_users": 312,
  "detection_rate": 0.25,
  "active_sessions": 2100,
  "last_updated": "2024-01-15T10:30:00Z"
}
```

## Configuration API

### Get Site Configuration

Retrieve your current site configuration.

<CodeGroup>
```bash cURL
curl -X GET https://api.ad-unblock.com/v1/config \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch('https://api.ad-unblock.com/v1/config', {
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY'
  }
});
```
</CodeGroup>

#### Response

```json
{
  "site_id": "site_123456",
  "detection_settings": {
    "detect_delay": 1000,
    "detect_retries": 3,
    "detection_methods": ["script_blocking", "element_hiding", "network_blocking"]
  },
  "message_settings": {
    "message_type": "overlay",
    "message_theme": "light",
    "allow_close": true,
    "show_frequency": "once_per_session"
  },
  "custom_messages": {
    "title": "Ad Blocker Detected",
    "message": "Please consider disabling your ad blocker",
    "button_text": "I've disabled my ad blocker"
  }
}
```

### Update Site Configuration

Update your site configuration settings.

<CodeGroup>
```bash cURL
curl -X PUT https://api.ad-unblock.com/v1/config \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "message_settings": {
      "message_type": "banner",
      "message_theme": "dark",
      "allow_close": true
    }
  }'
```

```javascript JavaScript
const response = await fetch('https://api.ad-unblock.com/v1/config', {
  method: 'PUT',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    message_settings: {
      message_type: 'banner',
      message_theme: 'dark',
      allow_close: true
    }
  })
});
```
</CodeGroup>

## Whitelist API

### Add to Whitelist

Add a user to your whitelist.

<CodeGroup>
```bash cURL
curl -X POST https://api.ad-unblock.com/v1/whitelist \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": "user_123",
    "session_id": "sess_456",
    "reason": "user_request"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.ad-unblock.com/v1/whitelist', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    user_id: 'user_123',
    session_id: 'sess_456',
    reason: 'user_request'
  })
});
```
</CodeGroup>

### Check Whitelist Status

Check if a user is whitelisted.

<CodeGroup>
```bash cURL
curl -X GET "https://api.ad-unblock.com/v1/whitelist/status?user_id=user_123" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch(
  'https://api.ad-unblock.com/v1/whitelist/status?user_id=user_123',
  {
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY'
    }
  }
);
```
</CodeGroup>

## Webhooks

### Configure Webhooks

Set up webhooks to receive real-time notifications about detection events.

#### Webhook Events

- `detection.created` - New ad blocker detection
- `whitelist.added` - User added to whitelist
- `whitelist.removed` - User removed from whitelist
- `config.updated` - Configuration changed

#### Webhook Payload

```json
{
  "event": "detection.created",
  "timestamp": "2024-01-15T10:30:00Z",
  "data": {
    "detection_id": "det_1234567890",
    "url": "https://example.com/page",
    "ad_blocker": "ublock-origin",
    "user_agent": "Mozilla/5.0...",
    "user_id": "user_123"
  }
}
```

### Register Webhook Endpoint

<CodeGroup>
```bash cURL
curl -X POST https://api.ad-unblock.com/v1/webhooks \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://your-site.com/webhook",
    "events": ["detection.created", "whitelist.added"],
    "secret": "your_webhook_secret"
  }'
```

```javascript JavaScript
const response = await fetch('https://api.ad-unblock.com/v1/webhooks', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    url: 'https://your-site.com/webhook',
    events: ['detection.created', 'whitelist.added'],
    secret: 'your_webhook_secret'
  })
});
```
</CodeGroup>

## Error Handling

### HTTP Status Codes

| Code | Description |
|------|-------------|
| 200 | Success |
| 201 | Created |
| 400 | Bad Request |
| 401 | Unauthorized |
| 403 | Forbidden |
| 404 | Not Found |
| 429 | Rate Limited |
| 500 | Internal Server Error |

### Error Response Format

```json
{
  "error": {
    "code": "invalid_request",
    "message": "The request is missing required parameters",
    "details": {
      "missing_fields": ["url", "timestamp"]
    }
  }
}
```

### Common Error Codes

| Code | Description |
|------|-------------|
| `invalid_api_key` | API key is invalid or missing |
| `rate_limited` | Too many requests |
| `invalid_request` | Request format is invalid |
| `resource_not_found` | Requested resource doesn't exist |
| `insufficient_permissions` | API key lacks required permissions |

## SDK Libraries

### JavaScript SDK

```bash
npm install @adunblock/sdk
```

```javascript
import AdUnblock from '@adunblock/sdk';

const client = new AdUnblock('YOUR_API_KEY');

// Record detection
await client.detection.record({
  url: window.location.href,
  userAgent: navigator.userAgent,
  adBlocker: 'ublock-origin'
});

// Get analytics
const analytics = await client.analytics.get({
  startDate: '2024-01-01',
  endDate: '2024-01-31'
});
```

### Python SDK

```bash
pip install adunblock-python
```

```python
from adunblock import AdUnblockClient

client = AdUnblockClient('YOUR_API_KEY')

# Record detection
detection = client.detection.record(
    url='https://example.com',
    user_agent='Mozilla/5.0...',
    ad_blocker='ublock-origin'
)

# Get analytics
analytics = client.analytics.get(
    start_date='2024-01-01',
    end_date='2024-01-31'
)
```

## Next Steps

<CardGroup cols={2}>
  <Card
    title="JavaScript Integration"
    icon="js"
    href="/guides/html-javascript"
  >
    Learn how to integrate the JavaScript SDK
  </Card>
  <Card
    title="View Dashboard"
    icon="chart-line"
    href="https://ad-unblock.com/dashboard"
  >
    Monitor your API usage and analytics
  </Card>
</CardGroup>
